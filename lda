@Test
void testReadCsvFromS3() throws IOException {
    String csvContent = "header1,header2\nvalue1,value2";
    ByteArrayInputStream inputStream = new ByteArrayInputStream(csvContent.getBytes());
    CSVReader csvReader = new CSVReader(new InputStreamReader(inputStream));

    List<String[]> csvData = csvReader.readAll();
    assertFalse(csvData.isEmpty(), "CSV data should not be empty");
    assertEquals(2, csvData.size(), "CSV should have 2 rows including header");
}


when(s3Client.getObject(any(GetObjectRequest.class))).thenAnswer(invocation -> {
    // Return a mocked InputStream directly
    return new ByteArrayInputStream(csvContent.getBytes());
});
